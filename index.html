<script>
document.getElementById('transferForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const dropboxPath = document.getElementById('dropboxPath').value;
    const driveFolderId = document.getElementById('driveFolderId').value;
    const result = document.getElementById('result');

    result.textContent = 'Transferring file...';

    try {
        const response = await fetch('https://dropbox-gdrive-transfer-pse4fil5ha-uc.a.run.app/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ dropbox_path: dropboxPath, drive_folder_id: driveFolderId }),
            credentials: 'include'
        });

        const data = await response.json();
        result.textContent = `Transfer result: ${JSON.stringify(data)}`;
    } catch (error) {
        result.textContent = `Error: ${error.message}`;
    }
});
</script>
